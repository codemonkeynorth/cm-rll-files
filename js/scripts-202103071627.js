parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"HZt4":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function n(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function i(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}var a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=new WeakMap,o=new WeakMap,l=new WeakMap,u=function(){function t(r,n){e(this,t),s.set(this,{writable:!0,value:void 0}),o.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),i(this,s,n),this.slug=r,this.progress=0}return r(t,[{key:"data",get:function(){return{slug:this.slug,progress:this.progress}},set:function(e){this.slug=e.slug,this.progress=e.progress}},{key:"isMainPage",get:function(){return n(this,s)}}]),t}(),f=u;exports.default=f;
},{}],"phHQ":[function(require,module,exports) {
"use strict";function e(e,t){return t&&t.toObject?t.toObject():t}function t(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonStringifyToObjectReplacer=e,exports.clone=t;
},{}],"wY3z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./LessonPage")),t=require("../helpers/JSONHelper");function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,s){return t&&o(e.prototype,t),s&&o(e,s),e}function a(e,t){var s=t.get(e);if(!s)throw new TypeError("attempted to get private field on non-instance");return s.get?s.get.call(e):s.value}function r(e,t,s){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}return s}var l=function(t,s){var n;return s.total_pages=t.total_pages,null===(n=t.pages)||void 0===n||n.forEach(function(n,o){var i=s.pages.find(function(e){return e.slug===n.slug});if(!i){var a=n.slug===t.slug;i=new e.default(n.slug,a),s.pages.push(i)}i.progress=n.progress||0}),s},u=function(e,t){return e.pages.forEach(function(e,s){var n=t.pages.find(function(t){return t.slug===e.slug});n?n.progress=e.progess:t.pages.push({slug:e.slug,progress:e.progress})}),t},g=new WeakMap,p=function(){function e(t,s){n(this,e),g.set(this,{writable:!0,value:void 0}),console.log("Lesson::constructor",t,s),r(this,g,s),this.slug=t,this.pages=[],this.total_pages=void 0}return i(e,[{key:"initialise",value:function(e){console.log("Lesson::initialise",(0,t.clone)(e)),this.pages=e,a(this,g)&&(this.total_pages=e.length)}},{key:"view",value:function(e){console.log("Lesson::view",e),this.pages.find(function(t){return t.slug===e}).progress=1}},{key:"sync",value:function(e){return console.log("Lesson::sync",(0,t.clone)(e)),e&&(this.data=l(e,this.data),e=u(this.data,e)),e}},{key:"data",get:function(){return{slug:this.slug,pages:this.pages,total_pages:this.total_pages,complete:this.complete}},set:function(e){var t,s,n,o,i;this.slug=null!==(t=e.slug)&&void 0!==t?t:this.slug,this.pages=null!==(s=e.pages)&&void 0!==s?s:this.pages,this.total_pages=null!==(n=e.total_pages)&&void 0!==n?n:this.total_pages,this.last_page_visited=null!==(o=e.last_page_visited)&&void 0!==o?o:this.last_page_visited,this.complete=null!==(i=e.complete)&&void 0!==i?i:this.complete}}]),e}(),c=p;exports.default=c;
},{"./LessonPage":"HZt4","../helpers/JSONHelper":"phHQ"}],"Dmf6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./models/Lesson")),s=require("./helpers/JSONHelper");function r(e){return e&&e.__esModule?e:{default:e}}var n="rll_progress",o=!0,t={active_course:null,current_lesson:null,current_lesson_page:null,courses:[],lessons:[]},u={init:function(e){console.log("ProgressTracker::init"),o=e},getProgress:function(){return(0,s.clone)(t)},loadProgress:function(){var e=null,s=localStorage.getItem(n);if(s){if(o){var r=atob(s);e=JSON.parse(r)}else e=JSON.parse(s);t=e}return t},flagCompleteLessons:function(e){e.lessons.forEach(function(e){var s=t.lessons.find(function(s){return s.slug===e.slug});e.complete||(console.log("course lesson not complete, checking",e.slug),e.complete=u.checkLessonComplete(s))})},updateCourseLessons:function(r){console.log("ProgressTracker::updateCourseLessons",(0,s.clone)(r)),r.lessons.forEach(function(s){var r=t.lessons.find(function(e){return e.slug===s.slug});r||(r=new e.default(s.slug,!0),t.lessons.push(r)),r.total_pages=s.total_pages,s.complete||(s.complete=u.checkLessonComplete(r))})},saveProgress:function(){var e;console.log("ProgressTracker::saveProgress",t);var s=JSON.stringify(t);(e=s,o)&&(e=btoa(s));localStorage.setItem("rll_progress",e)},clearProgress:function(){localStorage.removeItem(n)},setProgress:function(e){t=e},updateCourse:function(e){if(!e.complete){var s=this.checkCourseComplete(e);console.log("course complete? ",e.slug,s),e.complete=s}var r=t.courses.findIndex(function(s){return s.slug===e.slug});r>-1?t.courses[r]=e.data:t.courses.push(e.data)},getCourseProgress:function(e){var s=t.courses.find(function(s){return s.slug===e});return s||null},setActiveCourse:function(e){t.active_course=e},getActiveCourse:function(){return t.active_course},setCurrentLesson:function(e){console.log("ProgressTracker::setCurrentLesson",e),t.current_lesson=e},getCurrentLesson:function(){return t.current_lesson},setCurrentLessonPage:function(e){console.log("ProgressTracker::setCurrentLessonPage",e),t.current_lesson_page=e},updateLessonProgress:function(e){console.log("ProgressTracker::updateLesson",e.data);var s=t.lessons.findIndex(function(s){return s.slug===e.slug});s>-1?t.lessons[s]=e.data:t.lessons.push(e.data)},checkCourseComplete:function(e){if(e.complete)return!0;console.log("ProgressTracker::checkCourseComplete",e.slug);var s=e.lessons.filter(function(e){return!1===e.complete});return console.log(e.slug,"incomplete",s),!(s.length>0)},checkLessonComplete:function(e){if(e.complete)return!0;var s=!1,r=t.lessons.find(function(s){return s.slug===e.slug});return!!r&&(r.pages.filter(function(e){return 1===e.progress}).length>=r.total_pages&&(s=!0),s)},getLessonProgressValue:function(e){var s=t.lessons.find(function(s){return s.slug===e});if(s){var r=s.total_pages;return r?s.pages.reduce(function(e,s){return e+s.progress},0)/r:0}},flushStaleLessonPages:function(e){console.log("LessonPageController::flushStaleLessonPages",(0,s.clone)(e));var r=t.lessons.find(function(s){return s.slug===e.slug});if(r&&r){var n=r.pages.filter(function(s){return e.pages.findIndex(function(e){return e.slug===s.slug})>-1});r.pages=n}},getLessonProgress:function(e){console.log("ProgressTracker::getLessonProgress",e);var s=t.lessons.find(function(s){return s.slug===e});return s||null},setCurrentTopic:function(e){t.current_topic=e},getCurrentTopic:function(){return t.current_topic},isItemComplete:function(e,s){var r=!1;switch(e){case"course":var n=t.courses.find(function(e){return e.slug===s});n&&(r=this.checkCourseComplete(n));break;case"lesson":var o=t.lessons.find(function(e){return e.slug===s});o&&(r=this.checkLessonComplete(o))}return r},isLessonInActiveCourse:function(e){var s=t.active_course;if(s){var r=this.getCourseProgress(s);if(null==r?void 0:r.lessons)if(r.lessons.find(function(s){return s.slug===e}))return!0}return!1}},l=u;exports.default=l;
},{"./models/Lesson":"wY3z","./helpers/JSONHelper":"phHQ"}],"UFLO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../ProgressTracker"));function r(e){return e&&e.__esModule?e:{default:e}}var t={init:function(){console.log("PageController::init"),e.default.loadProgress(),e.default.setCurrentTopic(null),e.default.setCurrentLesson(null),e.default.setCurrentLessonPage(null),e.default.saveProgress()}},l=t;exports.default=l;
},{"../ProgressTracker":"Dmf6"}],"yxKm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={getPageType:function(){return $("[data-page-type]").data("page-type")},getPageSlug:function(e,t){var a=t;a||(a=window.location.href);var r=a.lastIndexOf("/");return a.substring(r+1,a.length)}},t=e;exports.default=t;
},{}],"YrKl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="#78b13f",t="#3898EC",r={colors:{light_green:e,light_blue:t,progress:t,highlight:e,complete:e}},l=r;exports.default=l;
},{}],"pmlh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addCheckMark=exports.markCompleteCards=void 0;var e=r(require("../ProgressTracker")),t=r(require("../Navigation")),o=r(require("../config/theme"));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=$("<div />");e.find("a").prepend(t),t.css({display:"inline-block",position:"absolute",bottom:8,right:12,height:16,width:8,borderBottom:"4px solid ".concat(o.default.colors.complete),borderRight:"4px solid ".concat(o.default.colors.complete),transform:"rotate(45deg)",zIndex:1e4})};exports.addCheckMark=a;var d=function(r){r.each(function(r,d){var i=$(d),s=i.closest("[data-list-type]").data("list-type"),l=i.find("a").attr("href"),c=t.default.getPageSlug(s,l);e.default.isItemComplete(s,c)&&(a(i),i.find(".cardtitle").css("background-color",o.default.colors.complete))})};exports.markCompleteCards=d;
},{"../ProgressTracker":"Dmf6","../Navigation":"yxKm","../config/theme":"YrKl"}],"S7QN":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function a(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=new WeakMap,u=new WeakMap,l=function(){function t(){e(this,t),o.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:"baz"}),n(this,"pub",void 0),a(this,o,"priv"),this.pub="pub"}return r(t,[{key:"foo",value:function(){}},{key:"toObject",value:function(){return{priv:i(this,o),pub:this.pub,nested:this.bar}}},{key:"bar",get:function(){return{bar:i(this,u)}}}]),t}(),f=l;exports.default=f;
},{}],"BOw9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r=s(require("../ProgressTracker")),t=require("../helpers/CardHelper"),o=require("../helpers/JSONHelper"),l=s(require("../models/Test"));function s(e){return e&&e.__esModule?e:{default:e}}var a={init:function(){console.log("HomePageController::init"),r.default.loadProgress(),r.default.setCurrentTopic(null),r.default.setCurrentLesson(null),r.default.setCurrentLessonPage(null),r.default.saveProgress(),$(document).on("pjax:end",this.onPageReady),this.onPageReady()},onPageReady:function(){e=$(".collection-item-card"),(0,t.markCompleteCards)(e)}},n=a;exports.default=n;
},{"../ProgressTracker":"Dmf6","../helpers/CardHelper":"pmlh","../helpers/JSONHelper":"phHQ","../models/Test":"S7QN"}],"FzvI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("../Navigation")),o=a(require("../ProgressTracker")),l=require("../helpers/CardHelper");function a(e){return e&&e.__esModule?e:{default:e}}var n={init:function(){console.log("TopicPageController::init"),e=t.default.getPageSlug("topic-level-1"),console.log("_slug",e),o.default.loadProgress(),o.default.setCurrentTopic(e),o.default.setCurrentLesson(null),o.default.setCurrentLessonPage(null),o.default.saveProgress(),$(document).on("pjax:end",this.onPageReady),this.onPageReady()},onPageReady:function(){r=$(".collection-item-card"),(0,l.markCompleteCards)(r)}},s=n;exports.default=s;
},{"../Navigation":"yxKm","../ProgressTracker":"Dmf6","../helpers/CardHelper":"pmlh"}],"jTVB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../ProgressTracker")),s=require("../helpers/JSONHelper");function o(e){return e&&e.__esModule?e:{default:e}}function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function n(e,s){for(var o=0;o<s.length;o++){var t=s[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function l(e,s,o){return s&&n(e.prototype,s),o&&n(e,o),e}var r=function(e,s){return console.log("copyCourseProgressToCourseData"),console.log("(loaded) courseProgress",e),console.log("(page) courseData",s),s},i=function(){function e(s){t(this,e),console.log("Course::constructor",s),this.slug=s,this.lessons=[],this.complete=!1}return l(e,[{key:"initialise",value:function(e){this.lessons=e}},{key:"sync",value:function(e){if(console.log("Course::sync",e),e){e.lessons.forEach(function(e){delete e.last_page});var s=$.extend(!0,{},this.data,e);this.data=s}else e=this.data}},{key:"data",get:function(){return{slug:this.slug,lessons:this.lessons,complete:this.complete}},set:function(e){var s,o,t;this.slug=null!==(s=e.slug)&&void 0!==s?s:this.slug,this.lessons=null!==(o=e.lessons)&&void 0!==o?o:this.lessons,this.complete=null!==(t=e.complete)&&void 0!==t?t:this.complete}}]),e}(),u=i;exports.default=u;
},{"../ProgressTracker":"Dmf6","../helpers/JSONHelper":"phHQ"}],"EdR2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slugs=void 0;var e={LESSON_ROOT:"collection-of-lesson-pages",COURSE_ROOT:"courses",TOPIC_LEVEL_1_ROOT:"topic-level-1"};exports.slugs=e;
},{}],"Y4rh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,s,t,a,r,n=g(require("../Navigation")),o=g(require("../ProgressTracker")),l=g(require("../models/Course")),i=g(require("../models/Lesson")),u=require("../config/constants"),d=g(require("../config/theme")),c=require("../helpers/JSONHelper");function g(e){return e&&e.__esModule?e:{default:e}}var f={init:function(){console.log("CoursePageController::init"),e=n.default.getPageSlug("course"),r=$(".courselink1"),s=o.default.loadProgress(),o.default.setCurrentLesson(null),o.default.setCurrentLessonPage(null),o.default.setCurrentTopic(null),o.default.setActiveCourse(e),this.updateProgress(),o.default.saveProgress(),this.setupLessonLinks(),this.addProgressMarks()},updateProgress:function(){t=new l.default(e);var s=this.getLessonDataFromPageElements();t.initialise(s),a=o.default.getCourseProgress(e),t.sync(a),o.default.updateCourseLessons(t),o.default.updateCourse(t)},getLessonDataFromPageElements:function(){return r.map(function(e,s){var t=$(s),a=n.default.getPageSlug("lesson",t.attr("href")),r=t.closest(".w-dyn-item"),o=r.find(".lesson-data").find("[data-lesson-page-slug]"),l=r.find(".lesson-data-extra").find("[data-last-page-in-lesson]");return{slug:a,total_pages:o.data("lesson-page-total")||1,last_page:l.data("last-page-in-lesson"),last_page_visited:null}}).get()},addProgressCircle:function(e,s){var t=e.parent().prev(".lesson-icon-container"),a=$("<div />");t.prepend(a);a.css({position:"absolute",width:"120%",height:"120%",left:"calc(-10%)",top:"-10%",marginLeft:"-3px"});var r={value:s,size:a[0].clientWidth,fill:s<1?d.default.colors.progress:d.default.colors.complete,startAngle:1.5*Math.PI};s>=1&&(r.animation=!1),a.circleProgress(r),t.find("canvas").css({maxWidth:"100%",maxHeight:"100%"})},addCheckMark:function(e){e.closest(".lesson-link-container");var s=e.parent().prev(".lesson-icon-container"),t=$("<span />");s.prepend(t),t.css({display:"inline-block",position:"absolute",top:"calc(50% - ".concat(18,"px)"),left:"calc(50% - ".concat(9,"px)"),width:18,height:36,borderBottom:"8px solid #78b13f",borderRight:"8px solid #78b13f",transform:"rotate(45deg)"})},addProgressMarks:function(){var e=this;r.each(function(s,t){var a=$(t),r=n.default.getPageSlug("lesson",a.attr("href")),l=o.default.getLessonProgressValue(r);e.addProgressCircle(a,l),l>=1&&e.addCheckMark(a)})},setupLessonLinks:function(){r.on("click",function(e){e.preventDefault();var s,a=$(e.currentTarget).closest(".w-dyn-item").find(".lesson-data").find("[data-lesson-page-slug]").data("lesson-page-slug"),r=t.lessons.find(function(e){return e.slug===a}),n=r.last_page_visited;s=n||a,o.default.setCurrentLesson(r.slug),o.default.saveProgress(),window.location.href="/".concat(u.slugs.LESSON_ROOT,"/").concat(s)})}},p=f;exports.default=p;
},{"../Navigation":"yxKm","../ProgressTracker":"Dmf6","../models/Course":"jTVB","../models/Lesson":"wY3z","../config/constants":"EdR2","../config/theme":"YrKl","../helpers/JSONHelper":"phHQ"}],"pTui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getYouTubeID=void 0;var e=function(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]};exports.getYouTubeID=e;
},{}],"mUdU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,s,n,r,o,a,u,i,l,d,c,f,g,p,v,m,P,h=O(require("../ProgressTracker")),b=O(require("../Navigation")),y=O(require("../models/Lesson")),L=O(require("../models/LessonPage")),C=O(require("../models/Course")),w=require("../config/constants"),_=require("../helpers/VideoHelper"),I=require("../helpers/JSONHelper");function O(e){return e&&e.__esModule?e:{default:e}}function S(e){return E(e)||q(e)||x(e)||A()}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return R(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?R(e,t):void 0}}function q(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function E(e){if(Array.isArray(e))return R(e)}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var T=!1,B={init:function(){console.log("LessonPageController::init"),d=$(".lesson-data"),c=d.find("[data-is-lesson-main-page]"),P=$(".video"),(m=P.find(".embedly-embed")).length&&(T=!0),r=b.default.getPageSlug("lesson"),i=c.data("is-lesson-main-page"),u=this.getMainPageSlug(),e=h.default.loadProgress(),o=h.default.getActiveCourse(),a=h.default.getCurrentTopic(),n=h.default.getLessonProgress(u),h.default.setCurrentLesson(u),h.default.setCurrentLessonPage(r),s=this.getLessonPagesFromPageElements(),(t=new y.default(u,i)).initialise(s),i&&h.default.flushStaleLessonPages(t),n=t.sync(n),l=h.default.isLessonInActiveCourse(t.slug),this.updateProgress(!T),h.default.saveProgress(),this.setupNavigation(),T&&this.setupVideo(m)},setupVideo:function(e){var t=this,s=e.attr("src"),n=new URL("http:"+decodeURIComponent(s)),r=new URLSearchParams(n.search).get("src"),o=(0,_.getYouTubeID)(r);console.log("new_src",r,o),P.css("padding-top","");e.parent().prepend('<div id="plyr" data-plyr-provider="youtube" data-plyr-embed-id="'.concat(o,'"></div>'));e.remove();var a=new Plyr("#plyr",{}),u=!1;a.on("playing",function(){$(".plyr__poster").css({zIndex:-1}),u||(t.updateProgress(!0),h.default.saveProgress(),u=!0)})},updateProgress:function(e){e&&t.view(r),h.default.updateLessonProgress(t),l&&this.updateLessonInActiveCourse(),this.updateCoursesProgressFromLesson(t)},getMainPageSlug:function(){return i?r:$("[data-lesson-page]").data("lesson-page")},getLessonPagesFromPageElements:function(){var e;if(i){var t=new L.default(r,!0),s=d.find("[data-lesson-page]").map(function(e,t){var s=$(t).data("lesson-page");return new L.default(s,!1)}).get();e=[t].concat(S(s))}else e=[new L.default(r,!1)];return e},updateCoursesProgressFromLesson:function(t){var s;console.log("LessonPageController::updateCoursesProgressFromLesson",t);var n=t.data;(null==n?void 0:n.pages)&&(null===(s=e)||void 0===s?void 0:s.courses)&&e.courses.filter(function(e){return e.lessons.find(function(e){return e.slug===u})}).forEach(function(e){var t=new C.default(e.slug);t.sync(e),h.default.updateCourseLessons(t),h.default.updateCourse(t)})},updateLessonInActiveCourse:function(){var t=h.default.getActiveCourse(),s=e.courses.find(function(e){return e.slug===t});if(o){var n=s.lessons.find(function(e){return e.slug===u});n&&(n.complete=h.default.checkLessonComplete(n),n.last_page_visited=r)}},getLastPageInPreviousLesson:function(){var t=e.active_course,s=e.courses.findIndex(function(e){return e.slug===t}),n=e.courses[s],r=n.lessons.findIndex(function(e){return e.slug===u}),o=n.lessons[r-1];return o?o.last_page?o.last_page:o.slug:null},setupContentsButton:function(){v=f.find('.pagebuttons.w-button[data-button-type="contents"]');var e="/";l?e="/".concat(w.slugs.COURSE_ROOT,"/").concat(o):a&&(e="/".concat(w.slugs.TOPIC_LEVEL_1_ROOT,"/").concat(a)),v.attr("href",e)},setupPrevButton:function(){var e=!1;if("#"===(p=f.find('.pagebuttons.w-button[data-button-type="prev"]')).attr("href")&&(e=!0,l)){var t=this.getLastPageInPreviousLesson();t&&(p.attr("href",t),e=!1)}p.css("visibility",e?"hidden":"visible"),p.removeClass("w-condition-invisible")},setupNextButton:function(){var e=!1;"#"===(g=f.find('.pagebuttons.w-button[data-button-type="next"]')).attr("href")&&(e=!0,l&&o&&(g.attr("href","/".concat(w.slugs.COURSE_ROOT,"/").concat(o)),e=!1));g.removeClass("w-condition-invisible"),g.css("visibility",e?"hidden":"visible")},setupNavigation:function(){f=$(".lesson-navigation"),this.setupPrevButton(),this.setupNextButton(),this.setupContentsButton()}},N=B;exports.default=N;
},{"../ProgressTracker":"Dmf6","../Navigation":"yxKm","../models/Lesson":"wY3z","../models/LessonPage":"HZt4","../models/Course":"jTVB","../config/constants":"EdR2","../helpers/VideoHelper":"pTui","../helpers/JSONHelper":"phHQ"}],"svLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=l(require("../Navigation")),o=l(require("../ProgressTracker")),a=require("../helpers/CardHelper");function l(e){return e&&e.__esModule?e:{default:e}}var n={init:function(){console.log("SearchPageController::init"),e=t.default.getPageSlug("search-for-content"),console.log("_slug",e),o.default.loadProgress(),o.default.setCurrentLesson(null),o.default.setCurrentLessonPage(null),o.default.saveProgress(),$(document).on("pjax:end",this.onPageReady),this.onPageReady()},onPageReady:function(){r=$(".collection-item-card"),(0,a.markCompleteCards)(r)}},s=n;exports.default=s;
},{"../Navigation":"yxKm","../ProgressTracker":"Dmf6","../helpers/CardHelper":"pmlh"}],"EwV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=l(require("../Navigation")),s=l(require("../ProgressTracker")),o=require("../helpers/CardHelper"),u=require("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var n={init:function(){console.log("404PageController::init"),s.default.loadProgress();var e=!1,r=s.default.getActiveCourse(),t=s.default.getCurrentLesson();r&&t?s.default.isLessonInActiveCourse(t)&&(e=!0,window.location.replace("/".concat(u.slugs.LESSON_ROOT,"/").concat(t))):e||(s.default.setActiveCourse(null),s.default.setCurrentLesson(null),s.default.setCurrentLessonPage(null),s.default.saveProgress())}},a=n;exports.default=a;
},{"../Navigation":"yxKm","../ProgressTracker":"Dmf6","../helpers/CardHelper":"pmlh","../config/constants":"EdR2"}],"imtx":[function(require,module,exports) {
"use strict";var e=n(require("./pages/PageController")),r=n(require("./pages/HomePageController")),a=n(require("./pages/TopicPageController")),t=n(require("./pages/CoursePageController")),l=n(require("./pages/LessonPageController")),i=n(require("./pages/SearchPageController")),o=n(require("./pages/404PageController")),s=n(require("./ProgressTracker")),u=n(require("./Navigation"));function n(e){return e&&e.__esModule?e:{default:e}}var c=u.default.getPageType();console.log(c),$(function(){switch(console.log("scripts.js:: jquery ready"),s.default.init(!1),c){case"home":r.default.init();break;case"course":t.default.init();break;case"lesson":l.default.init();break;case"topic-level-1":a.default.init();break;case"search":i.default.init();break;case"clear-data":s.default.clearProgress();break;case 404:o.default.init();break;default:e.default.init()}});
},{"./pages/PageController":"UFLO","./pages/HomePageController":"BOw9","./pages/TopicPageController":"FzvI","./pages/CoursePageController":"Y4rh","./pages/LessonPageController":"mUdU","./pages/SearchPageController":"svLS","./pages/404PageController":"EwV2","./ProgressTracker":"Dmf6","./Navigation":"yxKm"}]},{},["imtx"], null)